<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EpochLens</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="popup-container">
    <!-- Header -->
    <header class="header">
      <div class="header-brand">
        <div class="header-icon">
          <svg width="24" height="24" viewBox="0 0 48 48" fill="none">
            <rect width="48" height="48" rx="8" fill="url(#grad)"/>
            <circle cx="24" cy="24" r="16" fill="none" stroke="white" stroke-width="2" opacity="0.3"/>
            <path d="M24 12 L24 24 L32 28" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="24" cy="24" r="2" fill="white"/>
            <defs>
              <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#6366f1"/>
                <stop offset="100%" style="stop-color:#8b5cf6"/>
              </linearGradient>
            </defs>
          </svg>
        </div>
        <div class="header-text">
          <h1 class="header-title">EpochLens</h1>
          <span class="header-subtitle">Timestamp Converter</span>
        </div>
      </div>
      <button class="header-settings" id="openSettings" title="Settings">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"/>
          <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
        </svg>
      </button>
    </header>

    <!-- Tabs -->
    <nav class="tabs">
      <button class="tab active" data-tab="converter">Converter</button>
      <button class="tab" data-tab="stats">Page Stats</button>
    </nav>

    <!-- Converter Tab -->
    <section class="tab-content active" id="converter-tab">
      <!-- Input Section -->
      <div class="input-section">
        <label class="input-label" for="input">
          Enter timestamp or date
          <span class="input-hint" id="inputHint"></span>
        </label>
        <div class="input-wrapper">
          <input 
            type="text" 
            id="input" 
            class="input" 
            placeholder="e.g., 1701792000 or 2023-12-05"
            autocomplete="off"
            spellcheck="false"
          >
          <button class="input-clear" id="clearInput" title="Clear">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"/>
              <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
          </button>
        </div>
        <div class="input-actions">
          <button class="btn btn-secondary" id="pasteBtn">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2"/>
              <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/>
            </svg>
            Paste
          </button>
          <button class="btn btn-secondary" id="nowBtn">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12,6 12,12 16,14"/>
            </svg>
            Now
          </button>
        </div>
      </div>

      <!-- Results Section -->
      <div class="results-section" id="results">
        <div class="result-card" id="resultCard" style="display: none;">
          <!-- Epoch Result -->
          <div class="result-group" id="epochResult">
            <div class="result-header">
              <span class="result-label">Unix Timestamp</span>
              <div class="result-badges">
                <span class="result-badge" id="timestampType"></span>
              </div>
            </div>
            <div class="result-row">
              <span class="result-value mono" id="epochSeconds"></span>
              <button class="copy-btn" data-copy="epochSeconds" title="Copy">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="9" y="9" width="13" height="13" rx="2"/>
                  <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/>
                </svg>
              </button>
            </div>
            <div class="result-row secondary">
              <span class="result-value mono small" id="epochMs"></span>
              <button class="copy-btn" data-copy="epochMs" title="Copy milliseconds">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="9" y="9" width="13" height="13" rx="2"/>
                  <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/>
                </svg>
              </button>
            </div>
          </div>

          <!-- Formatted Date Result -->
          <div class="result-group">
            <div class="result-header">
              <span class="result-label" id="timezoneLabel">Local Time</span>
            </div>
            <div class="result-row">
              <span class="result-value" id="formattedDate"></span>
              <button class="copy-btn" data-copy="formattedDate" title="Copy">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="9" y="9" width="13" height="13" rx="2"/>
                  <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/>
                </svg>
              </button>
            </div>
          </div>

          <!-- Secondary Timezone -->
          <div class="result-group" id="secondaryTzGroup" style="display: none;">
            <div class="result-header">
              <span class="result-label" id="secondaryTzLabel">UTC</span>
            </div>
            <div class="result-row">
              <span class="result-value" id="secondaryDate"></span>
              <button class="copy-btn" data-copy="secondaryDate" title="Copy">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="9" y="9" width="13" height="13" rx="2"/>
                  <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/>
                </svg>
              </button>
            </div>
          </div>

          <!-- ISO Format -->
          <div class="result-group">
            <div class="result-header">
              <span class="result-label">ISO 8601</span>
            </div>
            <div class="result-row">
              <span class="result-value mono small" id="isoDate"></span>
              <button class="copy-btn" data-copy="isoDate" title="Copy">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="9" y="9" width="13" height="13" rx="2"/>
                  <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/>
                </svg>
              </button>
            </div>
          </div>

          <!-- Relative Time -->
          <div class="result-group">
            <div class="result-header">
              <span class="result-label">Relative</span>
            </div>
            <div class="result-row">
              <span class="result-value" id="relativeTime"></span>
            </div>
          </div>
        </div>

        <!-- Error State -->
        <div class="error-card" id="errorCard" style="display: none;">
          <div class="error-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <line x1="12" y1="8" x2="12" y2="12"/>
              <line x1="12" y1="16" x2="12.01" y2="16"/>
            </svg>
          </div>
          <p class="error-message" id="errorMessage">Invalid input</p>
        </div>

        <!-- Empty State -->
        <div class="empty-state" id="emptyState">
          <div class="empty-icon">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12,6 12,12 16,14"/>
            </svg>
          </div>
          <p class="empty-text">Enter a Unix timestamp or date to convert</p>
          <p class="empty-hint">Supports 10-digit (seconds) and 13-digit (milliseconds) timestamps</p>
        </div>
      </div>
    </section>

    <!-- Stats Tab -->
    <section class="tab-content" id="stats-tab">
      <div class="stats-container">
        <div class="stat-card">
          <div class="stat-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
              <polyline points="14,2 14,8 20,8"/>
              <line x1="16" y1="13" x2="8" y2="13"/>
              <line x1="16" y1="17" x2="8" y2="17"/>
              <polyline points="10,9 9,9 8,9"/>
            </svg>
          </div>
          <div class="stat-content">
            <span class="stat-value" id="pageCount">0</span>
            <span class="stat-label">Timestamps on this page</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="22,12 18,12 15,21 9,3 6,12 2,12"/>
            </svg>
          </div>
          <div class="stat-content">
            <span class="stat-value" id="totalConverted">0</span>
            <span class="stat-label">Total conversions</span>
          </div>
        </div>

        <div class="quick-settings">
          <h3 class="quick-settings-title">Quick Settings</h3>
          
          <label class="toggle-row">
            <span class="toggle-label">Enable on this page</span>
            <input type="checkbox" id="enabledToggle" class="toggle-input">
            <span class="toggle-switch"></span>
          </label>

          <label class="toggle-row">
            <span class="toggle-label">Show badge count</span>
            <input type="checkbox" id="badgeToggle" class="toggle-input">
            <span class="toggle-switch"></span>
          </label>

          <label class="toggle-row">
            <span class="toggle-label">Auto-scan new content</span>
            <input type="checkbox" id="autoScanToggle" class="toggle-input">
            <span class="toggle-switch"></span>
          </label>
        </div>

        <button class="btn btn-full" id="rescanBtn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="23,4 23,10 17,10"/>
            <path d="M20.49 15a9 9 0 11-2.12-9.36L23 10"/>
          </svg>
          Rescan Page
        </button>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <span class="footer-text">EpochLens v1.0.0</span>
      <a href="#" class="footer-link" id="fullSettingsLink">Full Settings</a>
    </footer>
  </div>

  <!-- Copy Toast -->
  <div class="toast" id="toast">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <polyline points="20,6 9,17 4,12"/>
    </svg>
    <span>Copied!</span>
  </div>

  <script src="popup.js"></script>
</body>
</html>

